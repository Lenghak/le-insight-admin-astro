import{j as t}from"./jsx-runtime.B5KViHfa.js";import{z as e,u as w,F as v,a as m,b as c,c as u,d as p,I as h,e as g,t as S}from"./index.BUoUBDUn.js";import{B as f,b}from"./button.BE5zELZS.js";import{s as N,A as j,M as _}from"./index.05oGKoQV.js";import{c as x}from"./utils.BNAsO71c.js";import{r as E}from"./index.BdjtwOc4.js";import{U as y}from"./index.CCTL292z.js";import{E as F,a as I}from"./eye.D3UzqA6M.js";import"./index.BSwc26KH.js";import"./index.B6I0esK7.js";import"./createLucideIcon.BGrtoPfL.js";const o=e.object({type:e.literal("profile"),id:e.string().uuid(),first_name:e.string(),last_name:e.string(),image_id:e.string().uuid().nullable(),bio:e.string().nullable(),gender:e.string().nullable(),sex:e.enum(["male","female","rather not say"]),created_at:e.string().datetime(),updated_at:e.string().datetime()}),P=({id:s,type:r,attributes:n,relationships:i=e.object({}),included:a=e.array(e.NEVER),meta:d=e.object({})})=>e.object({jsonapi:e.object({version:e.string().default("1.0")}),meta:d,data:e.object({type:r,id:s,attributes:n,relationships:i}),included:a}),k=({id:s,type:r,attributes:n})=>e.object({id:s,type:r,attributes:n}),l=e.object({type:e.literal("user"),id:e.string().uuid(),profile_id:e.string().uuid(),phone:e.string().nullable(),email:e.string().email(),role:e.string(),banned_until:e.string().datetime().nullable(),deleted_at:e.string().datetime().nullable(),invited_at:e.string().datetime().nullable(),confirmed_at:e.string().datetime().nullable(),confirmation_sent_at:e.string().datetime().nullable(),created_at:e.string().datetime(),updated_at:e.string().datetime()}),z=e.object({email:e.string().email("Enter a valid email address"),password:e.string().min(8,{message:"Enter at least 8 characters password"})});P({id:l.shape.id,type:l.shape.type,attributes:l.omit({id:!0,type:!0}),included:e.array(k({id:o.shape.id,type:o.shape.type,attributes:o.omit({id:!0,type:!0})})),meta:e.object({accessToken:e.string(),refreshToken:e.string()})});function L(){const s=w({resolver:S(z),defaultValues:{email:"",password:""}}),[r,n]=E.useState(!1);return t.jsx(v,{...s,children:t.jsxs("form",{method:"POST",onSubmit:s.handleSubmit(i=>{N("credentials",{redirect:!1,callbackUrl:"/auth/sign-in",...i}).then(async a=>{(await a?.json())?.url?.includes("?")&&y.error("Invalid Credential",{closeButton:!0,duration:10*1e3,description:"The email and password are invalid. Please check and try again."})}).catch(a=>y.error(a instanceof j&&a.response?.status===401?"Invalid Credential":"Sign In Failed",{closeButton:!0,duration:10*1e3,description:a instanceof j&&a.response?.status===401?"The email and password are invalid. Please check and try again.":"There was a technical problem while creating your account. Please try again later."}))}),className:"w-full space-y-2",children:[t.jsx(m,{control:s.control,name:"email",render:({field:i})=>t.jsxs(c,{children:[t.jsx(u,{className:"font-semibold",children:"Email"}),t.jsx(p,{children:t.jsx(h,{placeholder:"someone@example.com",...i})}),t.jsx(g,{className:"ml-4 list-item text-xs font-semibold"})]})}),t.jsx(m,{control:s.control,name:"password",render:({field:i})=>t.jsxs(c,{children:[t.jsx(u,{className:"font-semibold",children:"Password"}),t.jsx(p,{children:t.jsxs("div",{className:"relative",children:[t.jsx(h,{placeholder:"Enter a password",className:"pr-12",type:r?"text":"password",autoComplete:"on",...i}),t.jsx(f,{variant:"ghost",size:"icon",type:"button",className:"absolute right-0 top-0 rounded-md hover:bg-transparent",onClick:()=>n(!r),children:r?t.jsx(F,{size:18}):t.jsx(I,{size:18})})]})}),t.jsx(g,{className:"ml-4 list-item text-xs font-semibold"})]})}),t.jsx("div",{className:"flex w-full items-center justify-end",children:t.jsx("a",{href:"/auth/forgot-password",className:x(b({variant:"link",size:"sm"}),"font-bold"),children:"Forgot Password?"})}),t.jsx(f,{type:"submit",className:"w-full rounded-md font-bold",children:"Sign In"}),t.jsxs(_,{className:"text-center",children:["Don't have an account?"," ",t.jsx("a",{href:"/auth/sign-up",className:x(b({size:"sm",variant:"link"}),"font-bold"),children:"Create One"})]})]})})}export{L as default};
